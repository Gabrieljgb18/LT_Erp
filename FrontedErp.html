<!DOCTYPE html>
<html>
  <head>
    <base target="_top">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap 5 -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <style><?!= include("frontend_css") ?></style>
    <script>
      // Fuerza el viewport correcto en móviles (solución conocida para WebApps GAS)
      (function() {
        var meta = document.querySelector('meta[name=viewport]');
        if (meta) {
          meta.setAttribute(
            'content',
            'width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no'
          );
        }
      })();
    </script>
  </head>

  <body>
    <!-- Usamos el grid de Bootstrap -->
    <div class="container-fluid px-0 page-wrapper">
      <div class="row justify-content-center mx-0">
        <div class="col-12 col-md-10 col-lg-8 col-xl-7 px-0">
          <div class="card shadow-sm border-0 card-app">
            <div
              class="card-header card-header-app d-flex flex-column align-items-start"
            >
              <h2 id="form-title">Registro</h2>
              <span class="subtitle">Sistema de gestión · LT Servicios</span>
            </div>

            <div class="card-body">
              <!-- BUSCAR (arriba) -->
              <div id="search-bar-wrapper" class="mb-2 position-relative">

                <div class="input-group input-group-sm">
                  <span class="input-group-text">Buscar</span>
                  <input
                    id="search-query"
                    type="text"
                    class="form-control"
                    placeholder="Por nombre, CUIT, DNI, etc."
                  />
                  <button
                    id="btn-nuevo"
                    class="btn btn-outline-primary"
                    type="button"
                  >
                    Nuevo
                  </button>
                </div>
                <!-- Sugerencias tipo autocompletar -->
                <div
                  id="search-suggestions"
                  class="list-group position-absolute w-100 small shadow-sm d-none"
                  style="z-index: 20;"
                ></div>
              </div>

              <!-- Selector de formato -->
              <div class="row g-2 mb-2 align-items-end">
                <!-- XS (celu): col-12 → ocupa todo el ancho.
                    Desde sm en adelante: se comporta como antes -->
                <div class="col-12 col-sm-3">
                  <label for="formato" class="form-label mb-1">Formato</label>
                  <select id="formato" class="form-select form-select-sm"></select>
                </div>
                <div class="col-12 col-sm-9 text-sm-end">
                  <small class="text-muted">
                    Elegí el tipo de registro para cargar los datos.
                  </small>
                </div>
              </div>


              <!-- Contenedor para alerts bonitos -->
              <div id="alert-container" class="mb-2"></div>

              <!-- Campos del formulario -->
              <div id="form-fields" class="row g-2">
                <!-- se genera dinámicamente -->
              </div>
            </div>

            <div class="card-footer bg-white border-0 pt-0 pb-3">
              <div class="d-flex gap-2 justify-content-end">
                <button
                  id="btn-limpiar"
                  type="button"
                  class="btn btn-secondary btn-app btn-app-outline px-3"
                >
                  Limpiar
                </button>
                <button
                  id="btn-eliminar"
                  type="button"
                  class="btn btn-outline-danger btn-app btn-app-outline px-3"
                  disabled
                >
                  Eliminar
                </button>
                <button
                  id="btn-grabar"
                  type="button"
                  class="btn btn-success btn-app px-3"
                >
                  Grabar
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script><?!= include("app_bundle") ?></script>
  </body>
</html>
